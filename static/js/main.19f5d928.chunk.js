(this.webpackJsonpkirinuki=this.webpackJsonpkirinuki||[]).push([[0],{107:function(e,t,n){e.exports={AngleSlider:"AngleSlider_AngleSlider__2SJUR"}},113:function(e,t,n){e.exports={Cropper:"Canvas_Cropper__3Z3Jq"}},121:function(e,t,n){e.exports=n(197)},196:function(e,t,n){},197:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),l=n(38),i=n(9),u=n(14),s=[],p=Object(l.b)({name:"crops",initialState:s,reducers:{addCrop:function(e,t){e.push(t.payload)},deleteCrop:function(e,t){e.splice(t.payload,1)},clearCrops:function(){return s}}}),m=p.reducer,d=p.actions,f=d.addCrop,b=d.deleteCrop,_=d.clearCrops,g=n(119),C={fileName:null,url:null,angle:0},v=Object(l.b)({name:"sourceImage",initialState:C,reducers:{open:function(e,t){return Object(g.a)({},t.payload,{angle:C.angle})},close:function(){return C},setAngle:function(e,t){e.angle=t.payload}}}),O=v.reducer,E=v.actions,j=E.open,k=E.close,N=E.setAngle,h=Object(u.combineReducers)({crops:m,sourceImage:O}),w=n(200),y=n(83),I=n.n(y),L=n(104),R=n(5),S=n.n(R),x=n(50),P=n.n(x),D=n(11),F=function(e){var t=e.className,n=Object(i.c)((function(e){return e.crops})),c=Object(i.b)(),o=Object(a.useCallback)((function(e){return function(){c(b(e))}}),[c]);return r.a.createElement("div",{className:S()(t,P.a.CropList)},n.map((function(e,t){return r.a.createElement("div",{key:t,className:P.a.Crop},r.a.createElement("img",{className:P.a.Thumbnail,src:e.thumbnail,alt:""}),r.a.createElement(D.a,{className:P.a.DeleteIcon,type:"delete",onClick:o(t)}))})))},T=n(198),U=n(107),A=n.n(U),J=function(e){return"".concat(e.toFixed(1),"\xb0")},B=function(){var e=Object(i.c)((function(e){return Boolean(e.sourceImage.url)})),t=Object(i.b)(),n=Object(a.useCallback)((function(e){"number"===typeof e&&t(N(e))}),[t]);return r.a.createElement(T.a,{className:A.a.AngleSlider,disabled:!e,min:-10,max:10,step:.1,defaultValue:0,onChange:n,tipFormatter:J,tooltipPlacement:"bottom"})},z=n(48),W=function(){var e=Object(i.c)((function(e){return e.crops})),t=Object(i.c)((function(e){return e.sourceImage.fileName})),n=Object(a.useCallback)((function(){var n,a=JSON.stringify(e.map((function(e){return e.params})),null,2),r="".concat((n=t).substr(0,n.lastIndexOf(".")),".json");!function(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name,n.click(),URL.revokeObjectURL(t)}(new File([a],r,{type:"application/json"}))}),[e,t]);return r.a.createElement(z.a,{disabled:!e.length,type:"primary",icon:"download",onClick:n},"\u5207\u308a\u629c\u304d\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9")},q=n(41),K=n.n(q),M=K.a.Preview,Z=function(){return r.a.createElement("div",{className:K.a.Sidebar},r.a.createElement(B,null),r.a.createElement("div",{className:K.a.PreviewWrapper},r.a.createElement("div",{className:K.a.Preview})),r.a.createElement(F,{className:K.a.CropList}),r.a.createElement(W,null))},V=n(112),H=n.n(V),Y=(n(194),n(113)),G=n.n(Y),Q=function(e){var t,n=e.cropperRef,c=e.previewClassName,o=Object(i.c)((function(e){return e.sourceImage}));return Object(a.useEffect)((function(){n.current&&n.current.rotateTo(o.angle)}),[n,o.angle]),r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,{className:G.a.Cropper,ref:function(e){n.current=e},src:null!==(t=o.url)&&void 0!==t?t:void 0,autoCropArea:.2,preview:".".concat(c),dragMode:"move",toggleDragModeOnDblclick:!1}))},X=n(199),$=n(86),ee=n.n($),te=X.a.confirm,ne=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.sourceImage})),n=Object(a.useCallback)((function(){t.url&&(URL.revokeObjectURL(t.url),e(k()),e(_()))}),[e,t.url]),c=Object(i.c)((function(e){return e.crops.length>0})),o=Object(a.useCallback)((function(){return c?te({title:"\u753b\u50cf\u3092\u9589\u3058\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",content:"\u5207\u308a\u629c\u304d\u30c7\u30fc\u30bf\u306f\u7834\u68c4\u3055\u308c\u307e\u3059\u3002",okType:"danger",onOk:n,okText:"OK",cancelText:"\u30ad\u30e3\u30f3\u30bb\u30eb",centered:!0}):n()}),[n,c]);return r.a.createElement("div",{className:ee.a.FileName,onClick:o},t.fileName,r.a.createElement(D.a,{className:ee.a.CloseIcon,type:"close-circle"}))},ae=n(116),re=n(42),ce=n(61),oe=n.n(ce),le=function(){var e=Object(i.c)((function(e){return Boolean(e.sourceImage.url)})),t=Object(i.b)(),n=Object(ae.a)({accept:["image/jpeg","image/png"],noClick:e,noKeyboard:!0,onDrop:function(e){var n=e[0];if(e){var a=URL.createObjectURL(n);t(j({fileName:n.name,url:a}))}}}),a=n.getRootProps,c=n.getInputProps;return r.a.createElement("div",Object.assign({className:oe.a.Root},a()),r.a.createElement("input",c()),r.a.createElement(re.a,{className:oe.a.Empty,image:r.a.createElement(D.a,{type:"file-image",className:oe.a.Icon}),description:"\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af or \u30c9\u30ed\u30c3\u30d7\u3057\u3066\u753b\u50cf\u3092\u958b\u304f"}))},ie=n(87),ue=n.n(ie),se=w.a.Content,pe=w.a.Sider,me=function(){var e=Object(a.useRef)(null);!function(e){var t=Object(i.b)(),n=Object(a.useCallback)(function(){var n=Object(L.a)(I.a.mark((function n(a){var r,c,o,l,i,u,s,p,m;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.current)||"Enter"!==a.key){n.next=8;break}return c=r.getData(),o=c.x,l=c.y,i=c.width,u=c.height,s=c.rotate,p=r.getCroppedCanvas({width:300,height:300}),n.next=6,new Promise((function(e){return p.toBlob(e,"image/jpeg",.7)}));case 6:m=n.sent,t(f({params:{x:o,y:l,width:i,height:u,rotate:s},thumbnail:URL.createObjectURL(m)}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);Object(a.useEffect)((function(){return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}),[n])}(e);var t=Object(i.c)((function(e){return Boolean(e.sourceImage.url)}));return r.a.createElement(w.a,null,r.a.createElement(se,{className:ue.a.Content},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,{cropperRef:e,previewClassName:M}),r.a.createElement(ne,null)):r.a.createElement(le,null)),r.a.createElement(pe,{width:320,className:ue.a.Sider,theme:"light"},r.a.createElement(Z,null)))},de=(n(195),n(196),Object(l.a)({reducer:h}));o.a.render(r.a.createElement(i.a,{store:de},r.a.createElement(me,null)),document.getElementById("root"))},41:function(e,t,n){e.exports={Sidebar:"Sidebar_Sidebar__c0TTh",PreviewWrapper:"Sidebar_PreviewWrapper__3yT_p",Preview:"Sidebar_Preview__3edd7",CropList:"Sidebar_CropList__2dT_-"}},50:function(e,t,n){e.exports={CropList:"CropList_CropList__HvDYP",Crop:"CropList_Crop__2OCZE",Thumbnail:"CropList_Thumbnail__3bha8",DeleteIcon:"CropList_DeleteIcon__1tKMW"}},61:function(e,t,n){e.exports={Root:"Dropzone_Root__oZIIO",Empty:"Dropzone_Empty__kL6cb",Icon:"Dropzone_Icon__qVqCp"}},86:function(e,t,n){e.exports={FileName:"FileName_FileName__3JfId",CloseIcon:"FileName_CloseIcon__zCSps"}},87:function(e,t,n){e.exports={Content:"App_Content__3vRik",Sider:"App_Sider__3tFNd"}}},[[121,1,2]]]);
//# sourceMappingURL=main.19f5d928.chunk.js.map