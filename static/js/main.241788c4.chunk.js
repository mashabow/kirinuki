(this.webpackJsonpkirinuki=this.webpackJsonpkirinuki||[]).push([[0],{105:function(e,t,n){e.exports={AngleSlider:"AngleSlider_AngleSlider__2SJUR"}},111:function(e,t,n){e.exports={Cropper:"Canvas_Cropper__3Z3Jq"}},119:function(e,t,n){e.exports=n(194)},193:function(e,t,n){},194:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=n(39),l=n(9),u=n(14),s=[],m=Object(i.b)({name:"crops",initialState:s,reducers:{addCrop:function(e,t){e.push(t.payload)},deleteCrop:function(e,t){e.splice(t.payload,1)},clearCrops:function(){return s}}}),p=m.reducer,d=m.actions,f=d.addCrop,b=d.deleteCrop,_=d.clearCrops,v=n(117),g={fileName:null,url:null,angle:0},C=Object(i.b)({name:"sourceImage",initialState:g,reducers:{open:function(e,t){return Object(v.a)({},t.payload,{angle:g.angle})},close:function(){return g},setAngle:function(e,t){e.angle=t.payload}}}),E=C.reducer,O=C.actions,j=O.open,h=O.close,y=O.setAngle,w=Object(u.combineReducers)({crops:p,sourceImage:E}),N=n(197),k=n(11),S=n(5),I=n.n(S),L=n(23),R=n.n(L),P=R.a.ThumbnailPreview,x=function(e){var t=e.className,n=Object(l.c)((function(e){return e.crops})),c=Object(l.b)(),o=Object(a.useCallback)((function(e){return function(){c(b(e))}}),[c]),i=Object(l.c)((function(e){var t;return null!==(t=e.sourceImage.url)&&void 0!==t?t:void 0}));return r.a.createElement("div",{className:I()(t,R.a.CropList)},n.map((function(e,t){return r.a.createElement("div",{key:t,className:R.a.Crop},r.a.createElement("div",{className:R.a.Thumbnail,style:e.divStyle},r.a.createElement("img",{src:i,alt:"\u5207\u308a\u629c\u304d ".concat(t+1),style:e.imgStyle})),r.a.createElement(k.a,{className:R.a.DeleteIcon,type:"delete",onClick:o(t)}))})),r.a.createElement("div",{className:I()(R.a.Crop,R.a.CropPreview)},r.a.createElement("div",{className:I()(R.a.Thumbnail,P)})))},T=n(195),D=n(105),F=n.n(D),A=function(e){return"".concat(e.toFixed(1),"\xb0")},U=function(){var e=Object(l.c)((function(e){return Boolean(e.sourceImage.url)})),t=Object(l.b)(),n=Object(a.useCallback)((function(e){"number"===typeof e&&t(y(e))}),[t]);return r.a.createElement(T.a,{className:F.a.AngleSlider,disabled:!e,min:-10,max:10,step:.1,defaultValue:0,onChange:n,tipFormatter:A,tooltipPlacement:"bottom"})},z=n(49),J=function(){var e=Object(l.c)((function(e){return e.crops})),t=Object(l.c)((function(e){return e.sourceImage.fileName})),n=Object(a.useCallback)((function(){var n,a=JSON.stringify(e.map((function(e){return e.params})),null,2),r="".concat((n=t).substr(0,n.lastIndexOf(".")),".json");!function(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name,n.click(),URL.revokeObjectURL(t)}(new File([a],r,{type:"application/json"}))}),[e,t]);return r.a.createElement(z.a,{disabled:!e.length,type:"primary",icon:"download",onClick:n},"\u5207\u308a\u629c\u304d\u30c7\u30fc\u30bf\u3092\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9")},q=n(42),B=n.n(q),K=B.a.Preview,W=function(){return r.a.createElement("div",{className:B.a.Sidebar},r.a.createElement(U,null),r.a.createElement("div",{className:B.a.PreviewWrapper},r.a.createElement("div",{className:B.a.Preview})),r.a.createElement(x,{className:B.a.CropList}),r.a.createElement(J,null))},M=n(110),Z=n.n(M),H=(n(191),n(111)),V=n.n(H),Y=function(e){var t,n=e.cropperRef,c=e.previews,o=Object(l.c)((function(e){return e.sourceImage}));return Object(a.useEffect)((function(){n.current&&n.current.rotateTo(o.angle)}),[n,o.angle]),r.a.createElement(Z.a,{className:V.a.Cropper,ref:function(e){n.current=e},src:null!==(t=o.url)&&void 0!==t?t:void 0,autoCropArea:.2,preview:c.map((function(e){return".".concat(e)})).join(", "),dragMode:"move",toggleDragModeOnDblclick:!1})},G=n(196),Q=n(85),X=n.n(Q),$=G.a.confirm,ee=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.sourceImage})),n=Object(a.useCallback)((function(){t.url&&(URL.revokeObjectURL(t.url),e(h()),e(_()))}),[e,t.url]),c=Object(l.c)((function(e){return e.crops.length>0})),o=Object(a.useCallback)((function(){return c?$({title:"\u753b\u50cf\u3092\u9589\u3058\u3066\u3082\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f",content:"\u5207\u308a\u629c\u304d\u30c7\u30fc\u30bf\u306f\u7834\u68c4\u3055\u308c\u307e\u3059\u3002",okType:"danger",onOk:n,okText:"OK",cancelText:"\u30ad\u30e3\u30f3\u30bb\u30eb",centered:!0}):n()}),[n,c]);return r.a.createElement("div",{className:X.a.FileName,onClick:o},t.fileName,r.a.createElement(k.a,{className:X.a.CloseIcon,type:"close-circle"}))},te=n(114),ne=n(43),ae=n(61),re=n.n(ae),ce=function(){var e=Object(l.c)((function(e){return Boolean(e.sourceImage.url)})),t=Object(l.b)(),n=Object(te.a)({accept:["image/jpeg","image/png"],noClick:e,noKeyboard:!0,onDrop:function(e){var n=e[0];if(e){var a=URL.createObjectURL(n);t(j({fileName:n.name,url:a}))}}}),a=n.getRootProps,c=n.getInputProps;return r.a.createElement("div",Object.assign({className:re.a.Root},a()),r.a.createElement("input",c()),r.a.createElement(ne.a,{className:re.a.Empty,image:r.a.createElement(k.a,{type:"file-image",className:re.a.Icon}),description:"\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af or \u30c9\u30ed\u30c3\u30d7\u3057\u3066\u753b\u50cf\u3092\u958b\u304f"}))},oe=n(86),ie=n.n(oe),le=N.a.Content,ue=N.a.Sider,se=function(){var e=Object(a.useRef)(null);!function(e,t){var n=Object(l.b)(),r=Object(a.useCallback)((function(a){var r=e.current;if(r&&"Enter"===a.key){var c=r.getData(),o=c.x,i=c.y,l=c.width,u=c.height,s=c.rotate,m=document.querySelector(".".concat(t)).style,p=document.querySelector(".".concat(t,">img")).style;n(f({params:{x:o,y:i,width:l,height:u,rotate:s},divStyle:{width:m.width,height:m.height},imgStyle:{width:p.width,height:p.height,transform:p.transform}}))}}),[e,n,t]);Object(a.useEffect)((function(){return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}),[r])}(e,P);var t=Object(l.c)((function(e){return Boolean(e.sourceImage.url)}));return r.a.createElement(N.a,null,r.a.createElement(le,{className:ie.a.Content},t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,{cropperRef:e,previews:[K,P]}),r.a.createElement(ee,null)):r.a.createElement(ce,null)),r.a.createElement(ue,{width:320,className:ie.a.Sider,theme:"light"},r.a.createElement(W,null)))},me=(n(192),n(193),Object(i.a)({reducer:w}));o.a.render(r.a.createElement(l.a,{store:me},r.a.createElement(se,null)),document.getElementById("root"))},23:function(e,t,n){e.exports={CropList:"CropList_CropList__HvDYP",Crop:"CropList_Crop__2OCZE",CropPreview:"CropList_CropPreview__20KHl",Thumbnail:"CropList_Thumbnail__3bha8",ThumbnailPreview:"CropList_ThumbnailPreview__zBLOz",DeleteIcon:"CropList_DeleteIcon__1tKMW"}},42:function(e,t,n){e.exports={Sidebar:"Sidebar_Sidebar__c0TTh",PreviewWrapper:"Sidebar_PreviewWrapper__3yT_p",Preview:"Sidebar_Preview__3edd7",CropList:"Sidebar_CropList__2dT_-"}},61:function(e,t,n){e.exports={Root:"Dropzone_Root__oZIIO",Empty:"Dropzone_Empty__kL6cb",Icon:"Dropzone_Icon__qVqCp"}},85:function(e,t,n){e.exports={FileName:"FileName_FileName__3JfId",CloseIcon:"FileName_CloseIcon__zCSps"}},86:function(e,t,n){e.exports={Content:"App_Content__3vRik",Sider:"App_Sider__3tFNd"}}},[[119,1,2]]]);
//# sourceMappingURL=main.241788c4.chunk.js.map