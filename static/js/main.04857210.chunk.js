(this.webpackJsonpkirinuki=this.webpackJsonpkirinuki||[]).push([[0],{100:function(e,t,n){e.exports={AngleSlider:"AngleSlider_AngleSlider__2SJUR"}},108:function(e,t,n){e.exports={Cropper:"Canvas_Cropper__3Z3Jq"}},110:function(e,t,n){e.exports={Sider:"App_Sider__3tFNd"}},115:function(e,t,n){e.exports=n(191)},190:function(e,t,n){},191:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(7),o=n.n(c),i=n(35),l=n(9),u=n(13),s=Object(i.b)({name:"crops",initialState:[],reducers:{addCrop:function(e,t){e.push(t.payload)},deleteCrop:function(e,t){e.splice(t.payload,1)}}}),p=s.reducer,m=s.actions,d=m.addCrop,b=m.deleteCrop,f=n(113),_={fileName:null,url:null,angle:0},g=Object(i.b)({name:"sourceImage",initialState:_,reducers:{open:function(e,t){return Object(f.a)({},t.payload,{angle:_.angle})},setAngle:function(e,t){e.angle=t.payload}}}),v=g.reducer,C=g.actions,E=C.open,O=C.setAngle,j=Object(u.combineReducers)({crops:p,sourceImage:v}),h=n(194),w=n(78),y=n.n(w),k=n(97),N=n(4),L=n.n(N),S=n(44),I=n.n(S),R=n(26),x=function(e){var t=e.className,n=Object(l.c)((function(e){return e.crops})),c=Object(l.b)(),o=Object(a.useCallback)((function(e){return function(){c(b(e))}}),[c]);return r.a.createElement("div",{className:L()(t,I.a.CropList)},n.map((function(e,t){return r.a.createElement("div",{key:t,className:I.a.Crop},r.a.createElement("img",{className:I.a.Thumbnail,src:e.thumbnail,alt:""}),r.a.createElement(R.a,{className:I.a.DeleteIcon,type:"delete",onClick:o(t)}))})))},P=n(192),D=n(100),U=n.n(D),A=function(e){return"".concat(e.toFixed(1),"\xb0")},T=function(){var e=Object(l.c)((function(e){return Boolean(e.sourceImage.url)})),t=Object(l.b)(),n=Object(a.useCallback)((function(e){"number"===typeof e&&t(O(e))}),[t]);return r.a.createElement(P.a,{className:U.a.AngleSlider,disabled:!e,min:-10,max:10,step:.1,defaultValue:0,onChange:n,tipFormatter:A,tooltipPlacement:"bottom"})},J=n(193),B=function(){var e=Object(l.c)((function(e){return e.crops})),t=Object(l.c)((function(e){return e.sourceImage.fileName})),n=Object(a.useCallback)((function(){var n,a=JSON.stringify(e,null,2),r="".concat((n=t).substr(0,n.lastIndexOf(".")),".json");!function(e){var t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download=e.name,n.click(),URL.revokeObjectURL(t)}(new File([a],r,{type:"application/json"}))}),[e,t]);return r.a.createElement(J.a,{disabled:!e.length,type:"primary",icon:"download",onClick:n},"\u30c0\u30a6\u30f3\u30ed\u30fc\u30c9")},F=n(37),W=n.n(F),q=W.a.Preview,z=function(){return r.a.createElement("div",{className:W.a.Sidebar},r.a.createElement(T,null),r.a.createElement("div",{className:W.a.PreviewWrapper},r.a.createElement("div",{className:W.a.Preview})),r.a.createElement(x,{className:W.a.CropList}),r.a.createElement(B,null))},M=n(107),Z=n.n(M),K=(n(188),n(108)),V=n.n(K),H=function(e){var t=e.cropperRef,n=e.previewClassName,c=Object(l.c)((function(e){var t;return null!==(t=e.sourceImage.url)&&void 0!==t?t:void 0})),o=Object(l.b)(),i=Object(l.c)((function(e){return e.sourceImage.angle}));return Object(a.useEffect)((function(){t.current&&t.current.rotateTo(i)}),[i,t,o]),r.a.createElement(Z.a,{className:V.a.Cropper,ref:function(e){t.current=e},src:c,autoCropArea:.2,preview:".".concat(n),dragMode:"move",toggleDragModeOnDblclick:!1})},Y=n(111),G=n(38),Q=n(55),X=n.n(Q),$=function(e){var t=e.children,n=Object(l.c)((function(e){return Boolean(e.sourceImage.url)})),a=Object(l.b)(),c=Object(Y.a)({accept:["image/jpeg","image/png"],noClick:n,noKeyboard:!0,onDrop:function(e){var t=e[0];if(e){var n=URL.createObjectURL(t);a(E({fileName:t.name,url:n}))}}}),o=c.getRootProps,i=c.getInputProps;return r.a.createElement("div",Object.assign({className:X.a.Root},o()),r.a.createElement("input",i()),n?t:r.a.createElement(G.a,{className:X.a.Empty,image:r.a.createElement(R.a,{type:"file-image",className:X.a.Icon}),description:"\u3053\u3053\u3092\u30af\u30ea\u30c3\u30af or \u30c9\u30ed\u30c3\u30d7\u3057\u3066\u753b\u50cf\u3092\u958b\u304f"}))},ee=n(110),te=n.n(ee),ne=h.a.Content,ae=h.a.Sider,re=function(){var e=Object(a.useRef)(null);return function(e){var t=Object(l.b)(),n=Object(a.useCallback)(function(){var n=Object(k.a)(y.a.mark((function n(a){var r,c,o,i,l,u,s,p,m;return y.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.current)||"Enter"!==a.key){n.next=8;break}return c=r.getData(),o=c.x,i=c.y,l=c.width,u=c.height,s=c.rotate,p=r.getCroppedCanvas({width:300,height:300}),n.next=6,new Promise((function(e){return p.toBlob(e)}));case 6:m=n.sent,t(d({params:{x:o,y:i,width:l,height:u,rotate:s},thumbnail:URL.createObjectURL(m)}));case 8:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),[e,t]);Object(a.useEffect)((function(){return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}),[n])}(e),r.a.createElement(h.a,null,r.a.createElement(ne,null,r.a.createElement($,null,r.a.createElement(H,{cropperRef:e,previewClassName:q}))),r.a.createElement(ae,{width:320,className:te.a.Sider,theme:"light"},r.a.createElement(z,null)))},ce=(n(189),n(190),Object(i.a)({reducer:j}));o.a.render(r.a.createElement(l.a,{store:ce},r.a.createElement(re,null)),document.getElementById("root"))},37:function(e,t,n){e.exports={Sidebar:"Sidebar_Sidebar__c0TTh",PreviewWrapper:"Sidebar_PreviewWrapper__3yT_p",Preview:"Sidebar_Preview__3edd7",CropList:"Sidebar_CropList__2dT_-"}},44:function(e,t,n){e.exports={CropList:"CropList_CropList__HvDYP",Crop:"CropList_Crop__2OCZE",Thumbnail:"CropList_Thumbnail__3bha8",DeleteIcon:"CropList_DeleteIcon__1tKMW"}},55:function(e,t,n){e.exports={Root:"Dropzone_Root__oZIIO",Empty:"Dropzone_Empty__kL6cb",Icon:"Dropzone_Icon__qVqCp"}}},[[115,1,2]]]);
//# sourceMappingURL=main.04857210.chunk.js.map